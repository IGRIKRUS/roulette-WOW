!function(o){"use strict";function e(e){o.ajax({type:"GET",url:v+e.icon+".jpg",success:function(){o("#icon").attr("src",v+e.icon+".jpg"),o('input[name="icon"]').val(e.icon+".jpg")},error:function(){var t=new Image;t.src=f+e.icon+".jpg",t.onload=function(){o("#icon").attr("src",f+e.icon+".jpg"),o('input[name="icon"]').val(e.icon+".jpg")},t.onerror=function(){a(".callout",3,"Not Found Item"),o("#icon").attr("src",v+"null.png")}}})}function a(e,a,t,n){var i=["callout-success","callout-info","callout-warning","callout-danger"];o(e).addClass(i[a]),o(e+" p").html(t),o(e).fadeIn(),setTimeout(function(){o(e).fadeOut(700,function(){o(e).removeClass(i[a])}),void 0!=n&&0==a&&n()},2e3)}function t(o){void 0!=o&&(location.href=o)}function n(e){o(e).remove()}function i(o){return!isNaN(parseFloat(o))&&isFinite(o)}function c(a){o(a).change(function(){var a=o(this).val();if(i(a))o(this).prop("disabled",!0),$WowheadPower.callback=e,$WowheadPower.element="#load",$WowheadPower.getItem(a);else{var t={icon:""};t.icon=a,e(t)}o(this).prop("disabled",!1)})}function r(e,i){o(e).submit(function(c){c.preventDefault();var r=o(this).attr("action");o.post(r,{data:o(this).serialize()},function(c){void 0!=c.location?t(c.location):void 0!=c.hideform&&n(e),a(".callout",c.color,c.msg),0==c.color&&o("form")[0].reset(),void 0!=i&&i()})})}function l(){w.$area.val(""),w.updateFrame()}function s(o){w.$area.val(o),w.updateFrame()}function d(o){switch(m){case"ru":void 0!=o.tooltip_ruru?s(o.tooltip_ruru):a(".callout",3,"Not Found Item");break;default:void 0!=o.tooltip_enus?s(o.tooltip_enus):a(".callout",3,"Not Found Item")}}var u=o("body").data("path"),m=o("html").attr("lang");"en"==m&&(m="www"),o('[data-toggle="popover"]').popover({trigger:"hover",placement:"left",html:!0});var p=document.cookie.match(/CSRF_TOKEN=([\w-]+)/);p&&o.ajaxSetup({headers:{"X-CSRF-TOKEN":p[0]}});var f="https://wowimg.zamimg.com/images/wow/icons/large/",h="http://"+m+".wowhead.com/item=",v="/public/assets/icons/";window.$WowheadPower={callback:"",element:"",load:!1,registerItem:function(o,e,a){this.callback(a)},getItem:function(e){o.ajax({url:h+e+"&power",dataType:"script",cache:!1,beforeSend:function(){void 0!=$WowheadPower.element&&o($WowheadPower.element).append('<i class="fa fa-refresh fa-spin loader"></i>'),1==$WowheadPower.load&&(a(".callout",1,'<i class="fa fa-refresh fa-spin"></i> Loading...'),$WowheadPower.load=!1)},complete:function(e,a){"success"==a&&o(".loader").remove()}})}},c('#addCategory input[name="icon"]'),r("#addCategory"),r("#addMacros");var g={controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | print source",docCSSFile:"/public/assets/css/basic.css",bodyStyle:"background-color: #222d32;font:10pt Arial,Verdana;color:#fff;"},w=o("#textareas").cleditor(g)[0];o('#addItem [name="macros"]').on("change",function(){o.post(u+"/admin/macros/get",{data:"macro="+this.value},function(e){o("#macros .form-group").empty(),o.each(e,function(e,a){o("#macros .form-group").append('<input type="text" name="'+a+'" class="form-control" placeholder="'+a+' = ?"> <br />')})})}),c('#addItem input[name="icon"]'),r("#addItem",l),o("#parse_wowHead").change(function(){var e=o(this).val();o(this).prop("disabled",!0),$WowheadPower.callback=d,$WowheadPower.load=!0,$WowheadPower.getItem(e),o(this).prop("disabled",!1)});var b;o("a#remove").click(function(){b=o(this);var e=o(this).data("remove"),a=o(this).data("text");o("#btnRemove").attr("data-remove",e),o("#delText").html(a),o("#Modal").modal()}),o("#btnRemove").click(function(){var e=u+o(this).attr("data-remove");o.ajax({type:"GET",url:e,beforeSend:function(){o(".modal-title").append(' <i class="fa fa-refresh fa-spin loader"></i>')},complete:function(e,a){"success"==a&&o(".loader").remove()},success:function(e,a){"success"==a&&0==e.color?(b.parents("tr").fadeOut(600,function(){this.remove()}),o("#Modal").modal("hide")):"success"==a&&e.color>0&&o("#delText").html(e.msg)}})}),o("li#lang").click(function(){var e=o(this).data("lang");o.post(u+"/lang",{data:e},function(o){1==o&&location.reload()})})}(jQuery);