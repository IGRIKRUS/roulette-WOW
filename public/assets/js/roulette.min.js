/**
 * @script: Horizontal Roulette WoW (jQuery)
 * @Author: IGRIKRUS
 * @AuthorInfo: http://wowjp.net/index/8-181692
 * @email: v_motin@mail.ru
 *
 * Copyright (c) 2015 IGRIKRUS
 *
 * License MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:

 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.

 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

!function(t){"use strict";var e={lengthRun:3,width:100,offset:200,countStart:6,load:'<i class="fa fa-refresh fa-spin"></i> Loading...',error:"minimum 2 items",noItems:"No Items",maxItems:"no more than 25 items",images:null,timeOut:1e3,AudioPlay:function(t){e.AUstart=new Audio,e.AUstart.src=t+"start.wav",e.AUstart.volume=.2,e.AUload=new Audio,e.AUload.src=t+"load.wav",e.AUload.volume=.2,e.AUwin=new Audio,e.AUwin.src=t+"win.wav",e.AUwin.volume=.2},addItems:function(){e.container.append('<p class="loadItems">'+e.load+"</p>"),null!=e.images&&t.each(e.images,function(t,i){e.items.append(i)})},init:function(i,n,o){e.container=t(i),e.items=t(n),e.images=o,e.addItems(),setTimeout(function(){if(t(".loadItems").fadeOut(400,function(){t(this).remove()}),e.items.width(10500),e.count=e.items.find("li").length,e.countStart>e.count){switch(e.count){case 0:e.container.html("<p>ERROR: "+e.noItems+" !</p>"),e.err=!0;break;case 1:e.container.html("<p>ERROR: "+e.error+" !</p>"),e.err=!0;break;case 2:e.items.append(e.items.find("li").clone()),e.items.append(e.items.find("li").clone());break;case 3:e.items.append(e.items.find("li").clone());break;case 4:e.items.append(e.items.find("li").eq(0).clone()),e.items.append(e.items.find("li").eq(1).clone());break;case 5:e.items.append(e.items.find("li").eq(0).clone())}e.count=e.items.find("li").length}e.count>25&&(e.container.html("<p>ERROR: "+e.maxItems+" !</p>"),e.err=!0),e.i=0,e.totalW=e.count*e.width*e.lengthRun,e.W=e.width,e.countItem=e.count*e.lengthRun,e.idItem=0,e.items.fadeIn(700)},e.timeOut)},run:function(t,i){return void 0===e.err?(e.callback=i,e.items.find("li").removeClass("winItem"),e.index=t===!1?void 0:parseInt(t),e.AUwin.stop(),e.AUstart.play(),e.start()):void 0},start:function(){return void 0===e.err?(e.index=void 0===e.index||isNaN(e.index)?e.random(0,e.count-1):e.index,e.distance=e.totalW-e.offset+e.index*e.width,e.idItem=e.countItem+e.index,e.items.stop().animate({now:e.distance},{step:function(i,n){i>=e.W&&(e.W+=e.width,e.items.append(e.items.find("li").eq(e.i).clone()),e.i+=1),t(this).css({"margin-left":"-"+i+"px"}),e.AUload.play()},duration:3e3,complete:function(){e.AUload.stop(),e.AUwin.play(),this.now=0,e.items.find("li").eq(e.idItem).addClass("winItem"),void 0!=e.callback&&e.callback(e.idItem,e.items.find("li").eq(e.index).html())}},"swing")):void 0},random:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}};Audio.prototype.stop=function(){this.pause(),this.currentTime=0},Audio.prototype.off=function(){this.src=""},jQuery.rouletteInit=function(t){return e.AudioPlay(void 0!=t.path?t.path:""),(t.audio===!1||void 0===t.audio)&&(e.AUstart.off(),e.AUload.off(),e.AUwin.off()),e.init(t.container,t.items,t.images)},jQuery.rouletteRun=function(t,i){return e.run(t,i)}}(jQuery);
